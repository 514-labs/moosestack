<GuideStepper id="prepare-your-local-development-environment-steps" persist>
<GuideStepper.Step id="prepare-your-local-development-environment-step-1" number={1} title="Run your Moose development server" summary="">
<GuideStepper.WhatYouNeed>
- A local clone of your project repository and a terminal open to it
- Docker Desktop installed and running
</GuideStepper.WhatYouNeed>
<GuideStepper.WhatYouGet>
- A running local Moose environment via `moose dev`
- Active local services (ClickHouse, Redpanda, and supporting containers)
- A validated baseline before migration steps
</GuideStepper.WhatYouGet>

<GuideStepper.Checkpoint title="Create a new branch">
```bash 
git checkout -b <your-branch-name>
```

Create a new branch in your repo to isolate your changes. When you open a pull request from this branch, you‚Äôll get a preview environment you can use to validate changes before merging.

</GuideStepper.Checkpoint>

<GuideStepper.Checkpoint title="Ensure Docker Desktop is running"> 
  ```bash
  docker info >/dev/null 2>&1 || echo "Docker is not running. Start Docker Desktop (Mac/Windows) or Docker Engine (Linux), then retry."
  ```

If Docker is not running, start it using your OS-specific method and rerun the command.

</GuideStepper.Checkpoint>

<GuideStepper.Checkpoint title="Navigate to your MooseStack project directory and run the development server">
```bash
moose dev
```
</GuideStepper.Checkpoint>

<GuideStepper.Checkpoint title="Validate expected output">

```txt
üìç Available Routes:
  Base URL: http://localhost:4000

Static Routes:
METHOD ENDPOINT DESCRIPTION

---

GET /admin/inframap Admin: Get infrastructure map
GET /admin/reality-check Admin: Reality check - provides a diff when drift is detected between the running instance of moose and the db it is connected to
GET /health Health check endpoint
GET /ready Readiness check endpoint
...

```

</GuideStepper.Checkpoint>

<GuideStepper.Checkpoint title="Validate expected Docker Containers">
```bash
docker ps
```

```txt
CONTAINER ID   IMAGE                                                COMMAND                  CREATED              STATUS                        PORTS                                                                      NAMES
340d98861d3b   temporalio/ui:2.21.3                                 "./start-ui-server.sh"   About a minute ago   Up 57 seconds                 0.0.0.0:8080->8080/tcp                                                     ts-temporal-ui-1
2c8a8a75ced3   temporalio/admin-tools:1.22.3                        "tini -- sleep infin‚Ä¶"   About a minute ago   Up 57 seconds                                                                                            ts-temporal-admin-tools-1
fcb835863466   temporalio/auto-setup:1.22.3                         "/etc/temporal/entry‚Ä¶"   About a minute ago   Up 57 seconds (healthy)       6933-6935/tcp, 6939/tcp, 7234-7235/tcp, 7239/tcp, 0.0.0.0:7233->7233/tcp   ts-temporal-1
0c353274770e   clickhouse/clickhouse-server:25.8                    "/entrypoint.sh sh -‚Ä¶"   About a minute ago   Up 52 seconds (healthy)       0.0.0.0:9000->9000/tcp, 9009/tcp, 0.0.0.0:18123->8123/tcp                  ts-clickhousedb-1
2affed488342   redis:latest                                         "docker-entrypoint.s‚Ä¶"   About a minute ago   Up About a minute             0.0.0.0:6379->6379/tcp                                                     ts-redis-1
155ccd538cc7   postgres:13                                          "docker-entrypoint.s‚Ä¶"   About a minute ago   Up About a minute (healthy)   0.0.0.0:5432->5432/tcp                                                     ts-postgresql-1
f5a144eeea5e   clickhouse/clickhouse-keeper:25.8                    "/entrypoint.sh sh -‚Ä¶"   About a minute ago   Up About a minute (healthy)   2181/tcp, 9181/tcp, 10181/tcp, 44444/tcp                                   ts-clickhouse-keeper-1
be29be802bfb   docker.redpanda.com/redpandadata/redpanda:v24.3.11   "/entrypoint.sh redp‚Ä¶"   About a minute ago   Up About a minute (healthy)   8081-8082/tcp, 9092/tcp, 9644/tcp, 0.0.0.0:19092->19092/tcp                ts-redpanda-1
```

</GuideStepper.Checkpoint>
</GuideStepper.Step>

<GuideStepper.Step id="prepare-your-local-development-environment-step-2" number={2} title="Set up developer and agent tooling (recommended)" summary="Setup recommended tooling to help you get the most out of your development environment.">
<GuideStepper.WhatYouNeed>
- A running local Moose environment from Step 1
- Your preferred editor/copilot setup
- Recommended access to MCP and LSP extensions
</GuideStepper.WhatYouNeed>
<GuideStepper.WhatYouGet>
- Copilot access to local infra context through MooseDev MCP
- SQL validation/highlighting support in your editor via Moose LSP
- Faster iteration with less manual context switching
</GuideStepper.WhatYouGet>

<GuideStepper.Checkpoint title="Connect your Copilot to the MooseDev MCP server">
Lets your AI copilot query your local ClickHouse database, inspect logs, and explore infrastructure using natural language. Your copilot can verify query results, debug issues, and validate migrations without you copying/pasting commands.

:::include /shared/prerequisites/install-mcp.mdx

[Read the full MooseDev MCP Docs](https://docs.fiveonefour.com/moosestack/moosedev-mcp?lang=typescript):

</GuideStepper.Checkpoint>

<GuideStepper.Checkpoint title="Install the MooseStack Language Server (LSP)">
The [Moose LSP for Typescript](https://github.com/514-labs/moosestack-lsp) enables SQL validation and syntax highlighting for `sql` strings in Typescript objects in your Moose project.
Install the extension via your IDE marketplace:

- [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=514-labs.moosestack-lsp)
- [Cursor Marketplace](https://open-vsx.org/extension/514-labs/moosestack-lsp)

<Callout type="info" title="Alpha release">
  This feature is currently in alpha and has the following known limitation:
  Nested SQL and SQL fragments will be incorrectly highlighted as errors. If you
  would like access to experiment with this feature, let us know!
</Callout>
</GuideStepper.Checkpoint>
</GuideStepper.Step>
<GuideStepper.Step id="prepare-your-local-development-environment-step-3" number={3} title="Build a copilot context workspace (recommended)" summary="Create a dedicated workspace so your copilot has the right codebase context during migration.">
<GuideStepper.WhatYouNeed>
- Local environment running from Step 1
- Recommended copilot workflow for migration tasks
</GuideStepper.WhatYouNeed>
<GuideStepper.WhatYouGet>
- A reusable `moosestack/context` workspace for migration prompts
- A `context-map.md` template to track relevant files per component
- A reference example your copilot can follow during each phase
</GuideStepper.WhatYouGet>

<GuideStepper.Checkpoint title="Scaffold the copilot context workspace">
Copy the starter kit to create a dedicated workspace that compiles the context your copilot needs to migrate each component.

```bash
pnpm dlx tiged 514-labs/moosestack/examples/dashboard-migration moosestack/context
```

If `moosestack/context` already exists and is non-empty, remove or rename it before running this command again.

As you complete each phase of this guide, attach the required input files in your initial prompt to your copilot. The copilot can then update the workspace files as it completes each phase.

</GuideStepper.Checkpoint>
</GuideStepper.Step>
</GuideStepper>
