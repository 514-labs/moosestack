### Windows (WSL2) setup

#### Prerequisites

- **Windows 10 or 11**: Windows 10 version 2004 (build 19041) or later, or Windows 11. See Microsoft’s [WSL prerequisites](https://learn.microsoft.com/en-us/windows/wsl/install).
- **Hardware virtualization**: VT-x/AMD-V enabled in BIOS, and at least 4 GB RAM (Docker). See Microsoft’s [WSL containers guide](https://learn.microsoft.com/en-us/windows/wsl/tutorials/wsl-containers).
- **Internet access**: Required to download Ubuntu and packages.
- **Disk space**: 10–20 GB free for the Linux filesystem and Docker images.
- **Docker Desktop**: Used to run MooseStack’s local containers.
- *(Optional)* **Windows Terminal**: Recommended. See [Microsoft’s guidance](https://learn.microsoft.com/en-us/windows/dev-environment/javascript/nodejs-on-wsl).

#### Step 1: Enable WSL 2 and install Ubuntu Linux

1. Open PowerShell as Administrator (right-click Start menu, choose **PowerShell (Admin)**).
2. Run:

   ```shell
   wsl --install
   ```

3. If prompted, restart your computer to complete the installation.
4. If `wsl --install` only shows help text:

   1. List available distros:

      ```shell
      wsl --list --online
      ```

   2. Install Ubuntu explicitly:

      ```shell
      wsl --install -d Ubuntu
      ```

5. Complete Ubuntu’s first-time setup. After reboot, Windows should automatically launch Ubuntu. If it doesn’t open, launch **Ubuntu** from the Start menu.
6. Create your Linux user. You’ll be prompted to create a UNIX username and password for Ubuntu (separate from your Windows credentials). You won’t see characters as you type the password—this is normal.
7. Verify you’re on WSL2. In PowerShell (not the Ubuntu shell), run:

   ```shell
   wsl -l -v
   ```

   If your Ubuntu distro shows version `1`, upgrade it:

   ```shell
   wsl --set-version Ubuntu 2
   ```

#### Step 2: Update Linux Packages

Now that Ubuntu is running in WSL, update its package lists and upgrade installed packages:

1. In the Ubuntu terminal, run:

   ```shell
   sudo apt update && sudo apt upgrade -y
   ```

2. (Optional) Install basic tools:

   ```shell
   sudo apt install -y build-essential curl git
   ```

#### Step 3: Install and Configure Docker (WSL Integration)

MooseStack uses Docker containers under the hood for components like ClickHouse and Redpanda. On Windows, the recommended way to run Docker with WSL2 is via **Docker Desktop**.

**Install Docker Desktop**

1. Download **Docker Desktop for Windows** from Docker and run the installer. During installation, it may prompt to enable WSL2 features if not already enabled.
2. Launch Docker Desktop. In the taskbar, you’ll see the Docker whale icon (it may take a few seconds to start up the first time).

**Configure Docker Desktop with WSL2**

1. Enable WSL2 backend: In Docker Desktop, open **Settings**. Under **General**, ensure **"Use the WSL 2 based engine"** is checked. {/* image */}
2. Integrate with Ubuntu: In **Resources > WSL Integration**, enable integration for **Ubuntu** (or the distro you installed). {/* image */}
3. Allocate sufficient resources: MooseStack needs at least **2.5 GB** of Docker memory. In **Resources**, set memory to 3–4 GB to be safe.
4. Apply settings: Click **Apply & Restart** if you changed any settings.

**Test Docker inside WSL**

In the Ubuntu terminal, run:

```shell
docker --version
docker run hello-world
```

The `hello-world` container should print a “Hello from Docker!” message and exit. You can also run `docker ps` to confirm the Docker daemon is reachable from WSL.

**Troubleshooting:** If `docker run hello-world` fails, ensure Docker Desktop is running and WSL integration is enabled for your distro. Also verify Ubuntu is using WSL2 (Docker won’t work with WSL1).

#### Step 4: Proceed with MooseStack requirements and installation

You now have a working Ubuntu instance on your Windows machine with Docker installed. You can proceed to install MooseStack and its requirements (Node.js 20+ and/or Python 3.12+) as if you were installing on a regular Linux machine. Just make sure to install from the Linux terminal prompt in the Ubuntu instance.
