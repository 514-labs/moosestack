---
title: Planned Migrations (OLAP)
description: Generate, review, and apply OLAP migration plans
order: 10
category: olap
---

# Planned Migrations for OLAP

Use planned migrations in production workflows. They are deterministic and reviewable.

## Generate

```bash
moose generate migration --olap-engine clickhouse --olap-url "$MOOSE_OLAP__CONNECTION" --save
```

## Review

Review `migrations/plan.yaml` in pull requests.

Focus on:

- destructive operations
- rename assumptions
- raw SQL steps

## Apply

```bash
moose migrate --olap-engine clickhouse --olap-url "$MOOSE_OLAP__CONNECTION"
```

## Safety checks

- Drift check compares current remote state with `remote_state.json`.
- Contract check compares local code map with `local_infra_map.json`.
- Moose aborts when either check fails.

## Related pages

- [Migration Plan Format](/moosestack/migrate/plan-format)
- [Multi-Engine Migration Playbooks](/moosestack/migrate/multi-engine-migration-playbooks)
