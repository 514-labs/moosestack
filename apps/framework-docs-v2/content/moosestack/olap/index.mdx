---
title: Moose OLAP
description: Create and manage ClickHouse tables, materialized views, and data migrations
order: 0
---

import { Callout, CTACards, CTACard, LanguageTabs, LanguageTabContent } from "@/components/mdx";

# Moose OLAP

**Moose OLAP** is a database management layer that translates type-safe TypeScript or Python schemas into ClickHouse tables and viewsâ€”eliminating the need for manual SQL DDL.

It acts as the bridge between your application code and your analytical database, handling the lifecycle of tables, views, and migrations while ensuring type safety across your stack.

## Core Concepts

Moose OLAP is built on three foundational principles designed to streamline analytical data engineering:

### 1. Schema-as-Code
Your database schema is defined in your application code (TypeScript interfaces or Python Pydantic models). This serves as the single source of truth for both your application types and your database structure.
- **Compile-time validation**: Catch type mismatches between your code and database before they run.
- **Git-backed versioning**: Track schema changes in the same commit as the code that relies on them.

### 2. Hybrid Management Model
Moose OLAP supports flexible ownership models for your data infrastructure:
- **Managed Tables**: Moose handles the full lifecycle (CREATE, ALTER, DROP) based on your code definitions.
- **External Tables**: safely query tables managed by other tools (like [ClickPipes](/moosestack/olap/external-tables) or [PeerDB](/moosestack/olap/db-pull)) using generated types.

### 3. Automated Migrations
The development loop is designed for speed without sacrificing safety:
- **Dev Mode**: Moose watches your code, detects schema changes, and automatically [generates and applies migrations](/moosestack/migrate/apply-migrations) to your local sandbox.
- **Production**: [Committed migration files](/moosestack/migrate/planned-migrations) ensure deterministic, reproducible deployments to your production environment.

## Code Example

Define a table in your preferred language. Moose automatically provisions the corresponding ClickHouse MergeTree table.

<LanguageTabs items={["TypeScript", "Python"]}>
  <LanguageTabContent value="typescript">
```ts filename="AnalyticsEvents.ts"
import { Key, OlapTable } from "@514labs/moose-lib";

// Define the schema
interface AnalyticsEvent {
  eventId: Key<string>;  // Primary Key
  timestamp: Date;
  userId: string;
  eventType: string;
  properties: string;    // JSON string
}

// Export the table definition
export const analyticsEvents = new OlapTable<AnalyticsEvent>("analytics_events");
```
  </LanguageTabContent>
  <LanguageTabContent value="python">
```py filename="AnalyticsEvents.py"
from pydantic import BaseModel
from moose_lib import Key, OlapTable
from datetime import datetime

# Define the schema
class AnalyticsEvent(BaseModel):
    event_id: Key[str]   # Primary Key
    timestamp: datetime
    user_id: str
    event_type: str
    properties: str      # JSON string

# Create the table definition
analytics_events = OlapTable[AnalyticsEvent]("analytics_events")
```
  </LanguageTabContent>
</LanguageTabs>

## When to use Moose OLAP

Use Moose OLAP when you want to treat your analytical database as a dependency of your application code.

**Recommended for:**
- Teams building user-facing analytics features where type safety is critical.
- Projects that require rapid iteration on data models.
- Integrating ClickHouse into a TypeScript or Python backend.
- Managing a mix of proprietary data (Managed Tables) and ingested data (External Tables).

**Not designed for:**
- DBA-only workflows where SQL is the only interface.
- Static data warehouses with infrequent schema changes.
- Environments where application code cannot drive database changes.

## Getting Started

Select the use case that matches your current state:

### New Project?
Start by defining your data model.
<CTACards columns={2}>
  <CTACard
    title="Model Tables"
    description="Learn how to define tables and choose data types."
    ctaLink="/moosestack/olap/model-table"
    ctaLabel="Start Modeling"
    badge={{ variant: "moose", text: "Basics" }}
  />
  <CTACard
    title="Insert Data"
    description="Ingest data into your new tables."
    ctaLink="/moosestack/olap/insert-data"
    ctaLabel="Ingestion Guide"
    badge={{ variant: "moose", text: "Ingest" }}
  />
</CTACards>

### Existing ClickHouse Data?
Bring your existing tables into your Moose project.
<CTACards columns={2}>
  <CTACard
    title="Introspect Database"
    description="Bootstrap your project by pulling schemas from an existing database."
    ctaLink="/moosestack/getting-started/from-clickhouse"
    ctaLabel="Import Guide"
    badge={{ variant: "moose", text: "Bootstrap" }}
  />
  <CTACard
    title="Continuous Introspection"
    description="Keep external table definitions in sync with your database."
    ctaLink="/moosestack/olap/db-pull"
    ctaLabel="Sync Guide"
    badge={{ variant: "moose", text: "Sync" }}
  />
</CTACards>

### Advanced Capabilities
Optimize and extend your data layer.
<CTACards columns={2}>
  <CTACard
    title="Materialized Views"
    description="Create derived views for high-performance queries."
    ctaLink="/moosestack/olap/model-materialized-view"
    ctaLabel="Create Views"
    badge={{ variant: "moose", text: "Optimization" }}
  />
  <CTACard
    title="Schema Optimization"
    description="Tune indexes and sorting keys for speed."
    ctaLink="/moosestack/olap/schema-optimization"
    ctaLabel="Optimize"
    badge={{ variant: "moose", text: "Performance" }}
  />
</CTACards>
