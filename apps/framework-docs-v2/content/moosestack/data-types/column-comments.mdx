---
title: Column Comments
description: Add descriptions to your columns that propagate to ClickHouse schema
order: 18
category: reference
---

import { LanguageTabs, LanguageTabContent, Callout } from "@/components/mdx";

# Column Comments

Column comments let you add documentation directly to your data model fields. These descriptions automatically propagate to ClickHouse `COMMENT` clauses in your table DDL, making your schema self-documenting and easier to understand for anyone querying the database.

## Overview

By adding TSDoc comments (TypeScript) or field descriptions (Python) to your model fields, Moose extracts these descriptions and includes them as ClickHouse column comments when generating table schemas.

<LanguageTabs>
  <LanguageTabContent value="typescript">
Use TSDoc comments (`/** ... */`) directly above fields:

```typescript
import { Key, DateTime, OlapTable } from "@514labs/moose-lib";

interface UserEvent {
  /** Unique identifier for the user event */
  id: Key<string>;
  /** Timestamp when the event occurred */
  timestamp: DateTime;
  /** Email address of the user (must be valid format) */
  email: string;
  /** Total transaction amount in USD */
  amount: number;
  // Fields without TSDoc comments have no COMMENT in DDL
  status: string;
}

export const userEventTable = new OlapTable<UserEvent>("user_events", {
  orderByFields: ["id", "timestamp"],
});
```
  </LanguageTabContent>
  <LanguageTabContent value="python">
Python supports two ways to add column comments:

### Option 1: Field(description=...)

Use the `description` parameter in Pydantic's `Field()`:

```python
from pydantic import BaseModel, Field
from moose_lib import Key, OlapTable, OlapConfig
from datetime import datetime

class UserEvent(BaseModel):
    id: Key[str] = Field(description="Unique identifier for the user event")
    timestamp: datetime = Field(description="Timestamp when the event occurred")
    email: str = Field(description="Email address of the user (must be valid format)")
    amount: float = Field(description="Total transaction amount in USD")
    # Fields without description have no COMMENT in DDL
    status: str

user_event_table = OlapTable[UserEvent](
    "user_events",
    OlapConfig(order_by_fields=["id", "timestamp"]),
)
```

### Option 2: Attribute Docstrings

Use attribute docstrings with `use_attribute_docstrings=True` in your model config:

```python
from pydantic import BaseModel, ConfigDict
from moose_lib import Key, OlapTable, OlapConfig
from datetime import datetime

class UserEvent(BaseModel):
    model_config = ConfigDict(use_attribute_docstrings=True)

    id: Key[str]
    """Unique identifier for the user event."""

    timestamp: datetime
    """Timestamp when the event occurred."""

    email: str
    """Email address of the user (must be valid format)."""

    amount: float
    """Total transaction amount in USD."""

    # Fields without docstrings have no COMMENT in DDL
    status: str

user_event_table = OlapTable[UserEvent](
    "user_events",
    OlapConfig(order_by_fields=["id", "timestamp"]),
)
```

You can also mix both approaches in the same model - `Field(description=...)` and attribute docstrings work together.
  </LanguageTabContent>
</LanguageTabs>

## Generated DDL

The above model generates a ClickHouse table with column comments:

```sql
CREATE TABLE user_events (
  `id` String COMMENT 'Unique identifier for the user event',
  `timestamp` DateTime COMMENT 'Timestamp when the event occurred',
  `email` String COMMENT 'Email address of the user (must be valid format)',
  `amount` Float64 COMMENT 'Total transaction amount in USD',
  `status` String
) ENGINE = MergeTree()
ORDER BY (id, timestamp)
```

## Special Characters

Column comments support special characters including quotes, dollar signs, and Unicode. Moose automatically escapes these characters when generating DDL:

<LanguageTabs>
  <LanguageTabContent value="typescript">
```typescript
interface PaymentEvent {
  /** Total price in USD ($) */
  price: number;
  /** User's email address */
  email: string;
  /** Notes may contain "quoted text" */
  notes: string;
}
```
  </LanguageTabContent>
  <LanguageTabContent value="python">
```python
class PaymentEvent(BaseModel):
    price: float = Field(description="Total price in USD ($)")
    email: str = Field(description="User's email address")
    notes: str = Field(description='Notes may contain "quoted text"')
```
  </LanguageTabContent>
</LanguageTabs>

## Comments on Enum Columns

Enum columns in Moose store metadata in column comments to preserve enum variant names. When you add a description to an enum field, your comment is preserved alongside this metadata:

<LanguageTabs>
  <LanguageTabContent value="typescript">
```typescript
export enum OrderStatus {
  Pending = "pending",
  Processing = "processing",
  Shipped = "shipped",
  Delivered = "delivered",
  Cancelled = "cancelled",
}

interface Order {
  id: Key<string>;
  /** Current status of the order - updates as order progresses */
  status: OrderStatus;
  /** Priority level for fulfillment */
  priority: OrderStatus;
}
```
  </LanguageTabContent>
  <LanguageTabContent value="python">
```python
from enum import IntEnum, auto
from moose_lib import StringToEnumMixin

class OrderStatus(StringToEnumMixin, IntEnum):
    PENDING = auto()
    PROCESSING = auto()
    SHIPPED = auto()
    DELIVERED = auto()
    CANCELLED = auto()

class Order(BaseModel):
    id: Key[str]
    status: OrderStatus = Field(
        description="Current status of the order - updates as order progresses"
    )
    priority: OrderStatus = Field(description="Priority level for fulfillment")
```
  </LanguageTabContent>
</LanguageTabs>

The generated DDL includes both your comment and the enum metadata:

```sql
`status` Enum8(...) COMMENT 'Current status of the order - updates as order progresses [MOOSE_METADATA:DO_NOT_MODIFY]{"version":1,"enum":{"members":[...]}}'
```

<Callout type="warning" title="Do not modify enum metadata">
The `[MOOSE_METADATA:DO_NOT_MODIFY]` section in enum column comments is used by Moose to track enum variant names. Do not edit this portion directly in ClickHouse, as it may cause migration issues.
</Callout>

## Python Field Options

In Python, you can combine `description` with other `Field` options like `alias` for fields that need both renaming and documentation:

```python
class Event(BaseModel):
    # Field with both alias (for serialization) and description (for DDL)
    user_id: Key[str] = Field(
        alias="userId",
        description="Unique identifier linking to the users table"
    )
    # Optional field with description
    notes: Optional[str] = Field(
        default=None,
        description="Additional context about the event"
    )
```

## Benefits

- **Self-documenting schema**: Comments appear in ClickHouse system tables and query results
- **Query discoverability**: Use `DESCRIBE TABLE` to see column purposes
- **IDE integration**: ClickHouse clients often display column comments
- **Documentation sync**: Schema documentation stays in sync with your code

## Viewing Comments in ClickHouse

Query your column comments using ClickHouse system tables:

```sql
SELECT name, comment
FROM system.columns
WHERE table = 'user_events' AND database = 'local'
```

Or use the `DESCRIBE` command with extended format:

```sql
DESCRIBE TABLE user_events FORMAT Vertical
```

## See Also

- [Modeling Tables](/moosestack/olap/model-table) - Complete guide to defining OLAP tables
- [Enums](/moosestack/data-types/enums) - Working with enum types
- [Data Modeling](/moosestack/data-modeling) - Overview of data modeling in Moose
