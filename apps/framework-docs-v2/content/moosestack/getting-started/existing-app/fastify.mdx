---
title: Add Moose to Fastify
description: Integrate MooseStack into an existing Fastify app with an engine-neutral contract
order: 9
category: getting-started
---

# Add Moose to Fastify

Use this guide to add MooseStack to an existing Fastify service.

## 1. Initialize Moose workspace

```bash
moose init moose typescript --olap-engine clickhouse
pnpm install
```

## 2. Configure engine and profile

```toml title="moose/moose.config.toml"
[olap]
engine = "clickhouse" # clickhouse | duckdb | snowflake
profile = "remote"
connection = "https://user:password@host:8443/db"

[dev_infra]
profile = "remote_hybrid"
```

## 3. Configure Fastify runtime env vars

```bash title=".env"
MOOSE_CLIENT_ONLY=true
MOOSE_OLAP__ENGINE=clickhouse
MOOSE_OLAP__PROFILE=remote
MOOSE_OLAP__CONNECTION=https://user:password@host:8443/db
MOOSE_DEV_INFRA__PROFILE=remote_hybrid
```

## 4. Run both services

```bash
pnpm -C moose moose dev --infra-profile remote_hybrid
pnpm run dev
```

## 5. Run migrations

```bash
pnpm -C moose moose generate migration \
  --olap-engine clickhouse \
  --olap-url "$MOOSE_OLAP__CONNECTION" \
  --save

pnpm -C moose moose migrate \
  --olap-engine clickhouse \
  --olap-url "$MOOSE_OLAP__CONNECTION"
```

## 6. Refresh external models

```bash
pnpm -C moose moose db pull \
  --olap-engine clickhouse \
  --olap-url "$MOOSE_OLAP__CONNECTION"
```

## Related pages

- [Engine and Dev Profile](/moosestack/configuration/engine-and-dev-profile)
- [Multi-Engine Migration Playbooks](/moosestack/migrate/multi-engine-migration-playbooks)
