---
title: Deploying on ECS
description: Run MooseStack on Amazon ECS with remote-first OLAP configuration
order: 4
category: deploying
---

# Deploying on ECS

Use ECS task environment variables with the canonical engine-neutral contract.

## Required environment variables

| Key                        | Description             | Example                              |
| -------------------------- | ----------------------- | ------------------------------------ |
| `MOOSE_OLAP__ENGINE`       | Selected OLAP engine    | `clickhouse`                         |
| `MOOSE_OLAP__PROFILE`      | OLAP connection profile | `remote`                             |
| `MOOSE_OLAP__CONNECTION`   | OLAP connection URL     | `https://user:password@host:8443/db` |
| `MOOSE_DEV_INFRA__PROFILE` | Runtime infra mode      | `remote_full`                        |
| `MOOSE_REDIS_CONFIG__URL`  | Redis URL               | `redis://user:pass@host:6379`        |

## Example migration step in pipeline

```bash
moose generate migration --olap-engine "$MOOSE_OLAP__ENGINE" --olap-url "$MOOSE_OLAP__CONNECTION" --save
moose migrate --olap-engine "$MOOSE_OLAP__ENGINE" --olap-url "$MOOSE_OLAP__CONNECTION"
```

## Security

Store `MOOSE_OLAP__CONNECTION` and other secrets in AWS Secrets Manager.
