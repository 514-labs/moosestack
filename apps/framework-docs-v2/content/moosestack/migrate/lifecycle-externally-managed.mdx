---
title: Externally Managed Lifecycle
description: Configure Moose to interact with existing, externally managed database schemas.
order: 23
category: migrate
---

import { Callout, LanguageTabs, LanguageTabContent } from "@/components/mdx";

# Externally Managed

`LifeCycle.EXTERNALLY_MANAGED` tells MooseStack to interact with existing resources without managing their schema or lifecycle. In this mode, you are fully responsible for creating and maintaining the database schema outside the context of your code.

## When to Use

Mark a table `EXTERNALLY_MANAGED` when you want to connect to an existing database table where the schema is owned by another team, process, or tool (e.g., PeerDB, Debezium, ClickPipes).

## Why Model External Tables in MooseStack?

Defining the table lets you write type-safe queries, create [Views](/moosestack/olap/model-view), [Materialized Views](/moosestack/olap/model-materialized-view), and [API endpoints](/moosestack/api) against schemas you don't own while still getting full IDE autocompletion.


## Syncing External Models

Because MooseStack doesn't manage the schema, your code definitions must match the database exactly. Mismatches can cause runtime errors.

Use `moose db pull` to generate Moose OLAP models from your remote database:

```bash
moose db pull --clickhouse-url <YOUR_CLICKHOUSE_URL>
```

## Configuration

<LanguageTabs>
  <LanguageTabContent value="typescript" label="TypeScript">

```ts title="ExternallyManagedExample.ts"
import { Stream, OlapTable, LifeCycle, Key } from "@514labs/moose-lib";

interface ExternalUserData {
  userId: Key<string>;
  fullName: string;
  emailAddress: string;
  createdAt: Date;
}

// Connect to existing database table
const legacyUserTable = new OlapTable<ExternalUserData>("legacy_users", {
  lifeCycle: LifeCycle.EXTERNALLY_MANAGED
});

// Connect to existing Kafka topic
const legacyStream = new Stream<ExternalUserData>("legacy_user_stream", {
  lifeCycle: LifeCycle.EXTERNALLY_MANAGED,
  destination: legacyUserTable
});
```

  </LanguageTabContent>
  <LanguageTabContent value="python" label="Python">

```py filename="ExternallyManagedExample.py" copy
from moose_lib import Stream, OlapTable, OlapConfig, StreamConfig, LifeCycle, Key
from pydantic import BaseModel
from datetime import datetime

class ExternalUserData(BaseModel):
    user_id: Key[str]
    full_name: str
    email_address: str
    created_at: datetime

# Connect to existing database table
legacy_user_table = OlapTable[ExternalUserData]("legacy_users", OlapConfig(
    life_cycle=LifeCycle.EXTERNALLY_MANAGED
))

# Connect to existing Kafka topic
legacy_stream = Stream[ExternalUserData]("legacy_user_stream", StreamConfig(
    life_cycle=LifeCycle.EXTERNALLY_MANAGED,
    destination=legacy_user_table
))
```

  </LanguageTabContent>
</LanguageTabs>

<Callout type="warning" title="Local Development Behavior">
`moose dev` **WILL CREATE** `EXTERNALLY_MANAGED` tables in your local ClickHouse instance to enable development of queries and views against your schema.

- **Local Updates**: Schema changes in code **WILL** update your local database.
- **No Remote Impact**: These changes are **NEVER** applied to the remote database.
</Callout>
