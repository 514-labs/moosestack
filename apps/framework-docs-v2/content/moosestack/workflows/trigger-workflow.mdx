---
title: Trigger Workflows
description: Start workflows from events, APIs, or external triggers
order: 3
category: workflows
---

# Trigger Workflows

## Overview

Moose workflows can be triggered programmatically from various sources including APIs, events, external systems, or manual execution. This enables you to build reactive data processing pipelines and on-demand task execution.

## Manual Workflow Execution

The simplest way to trigger a workflow is using the Moose CLI:

```bash filename="Terminal" copy
# Run a workflow manually
moose workflow run example

# Run with input parameters
moose workflow run example --input '{"name": "John", "email": "john@example.com"}'
```

### Passing Input to Workflows

When triggering workflows, you can pass input data that will be passed to the starting task:

```bash filename="Terminal" copy
moose workflow run data-processing --input '{
  "sourceUrl": "https://api.example.com/data",
  "apiKey": "your-api-key",
  "batchSize": 100
}'
```

The input is parsed as JSON and passed to the workflow's starting task.

## API-Triggered Workflows

Trigger workflows directly via an HTTP POST endpoint exposed by the webserver. These endpoints are protected by admin authentication.

- Endpoint: `POST /admin/workflows/{workflowName}/trigger`

### Authentication

Workflow API endpoints require admin authentication in both development and production. If the admin API key is not configured, the endpoint returns `401 Unauthorized: Admin API key not configured`.

1. Generate a token and hashed key:
   ```bash filename="Terminal" copy
   moose generate hash-token
   # Outputs:
   # - ENV API Key (hashed) → for config file
   # - Bearer Token (plain) → for Authorization header
   ```

2. Configure the admin API key in `moose.config.toml`:
   ```toml filename="moose.config.toml" copy
   [authentication]
   admin_api_key = "<hashed_key_from_output>"
   ```

3. Include the Bearer token in your requests (see examples below).

For details, see the [API Authentication docs](/moosestack/apis/auth).

### Trigger Request

- Body: optional JSON payload passed to the workflow's starting task.

Example:

```bash filename="Terminal" copy
curl -X POST 'http://localhost:4000/admin/workflows/data-processing/trigger' \
  -H 'Authorization: Bearer <plain_token_from_output>' \
  -H 'Content-Type: application/json' \
  -d '{
    "inputValue": "process-user-data",
    "priority": "high"
  }'
```

### Response

```json filename="Response"
{
  "workflowId": "data-processing-<hash>",
  "runId": "<id>",
  "dashboardUrl": "..."  // included in dev only
}
```

## Terminate a Running Workflow

After triggering a workflow, you can terminate it via an HTTP endpoint.

- Endpoint: `POST /admin/workflows/{workflowName}/terminate`

### Terminate Request

```bash filename="Terminal" copy
curl -X POST 'http://localhost:4000/admin/workflows/data-processing/terminate' \
  -H 'Authorization: Bearer <plain_token_from_output>'
```

## Workflow History

You can retrieve the history of workflow executions:

- Endpoint: `GET /admin/workflows/history`

### History Request

```bash filename="Terminal" copy
curl -X GET 'http://localhost:4000/admin/workflows/history' \
  -H 'Authorization: Bearer <plain_token_from_output>'
```

With optional query parameters:

```bash filename="Terminal" copy
curl -X GET 'http://localhost:4000/admin/workflows/history?status=RUNNING&limit=20' \
  -H 'Authorization: Bearer <plain_token_from_output>'
```
