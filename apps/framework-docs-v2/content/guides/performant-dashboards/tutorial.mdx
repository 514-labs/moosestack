---
title: Tutorial
description: Step-by-step guide to migrating your dashboard to ClickHouse
languages: ["typescript"]
---

import {
  Callout,
  CustomizePanel,
  CustomizeGrid,
  SelectField,
  ConditionalContent,
  CommunityCallout,
  BulletPointsCard,
} from "@/components/mdx";

# Tutorial: Migrate Your Dashboard to ClickHouse

This tutorial is for teams with a production dashboard or report that needs to get faster as data volume grows.

<BulletPointsCard
  title="By the end of this guide you’ll have"
  bulletStyle="check"
  bullets={[
    {
      title: "Real-time replication (CDC) pipeline",
      description:
        "A production pipeline that continuously replicates data from your source database into ClickHouse.",
    },
    {
      title: "ClickHouse analytics layer in code",
      description:
        "A MooseStack project that defines views, materialized views, serving tables, and query/API handlers on top of CDC-replicated raw tables.",
    },
    {
      title: "Safe local-to-production workflow",
      description:
        "A local development workflow plus Boreal preview environments and migration plans so you can validate changes before merging to `main`."
    },
  ]}
/>

You do not need a full rewrite. Keep your source database (Postgres or SQL Server) as the transactional system of record, keep your existing app contracts, and offload analytical reads to ClickHouse via CDC (ClickPipes or Debezium).

This guide gives a path to ship this as normal code, as part of your existing development process. With MooseStack, you model your ClickHouse analytics layer in code, iterate locally, and roll out with preview migrations in Boreal so you can safely iterate on your analytics layer without risking your production ClickHouse data.

<Callout
  type="info"
  title="Starting from scratch?"
  href="/guides/chat-in-your-app"
  ctaLabel="Get started"
>
  If you’re building a new dashboard or data-connected chat (not migrating an
  existing dashboard), start with [Chat in Your App](/guides/chat-in-your-app).
</Callout>

## Customize this tutorial

<CustomizePanel
  title="Where does your current data live?"
  description="Select the database you use today so we can show the right way to replicate this data into ClickHouse"
>
  <CustomizeGrid columns={1}>
    <SelectField
      id="source-database"
      label="Source database"
      options={[
        { value: "sqlserver", label: "SQL Server" },
        { value: "postgres", label: "Postgres" },
      ]}
      defaultValue="postgres"
      persist
    />
    <SelectField
      id="os"
      label="Operating System"
      options={[
        { value: "macos", label: "macOS or Linux" },
        { value: "windows", label: "Windows (WSL 2)" },
      ]}
      defaultValue="macos"
      persist
    />
    <SelectField
      id="language"
      label="Language"
      options={[
        { value: "typescript", label: "TypeScript" },
      ]}
      defaultValue="typescript"
      persist
    />
  </CustomizeGrid>
</CustomizePanel>

<CommunityCallout title="Want Python Examples?">
This guide is written for TypeScript developers, but Python developers can follow along. The concepts translate directly, and MooseStack supports both languages. If you'd like Python-specific examples, let us know in our Slack community and we'll prioritize creating them.
</CommunityCallout>

You'll work through:

<ConditionalContent whenId="source-database" whenValue="postgres">
1. [Project Setup](#project-setup) to set up ClickHouse Cloud ClickPipes, initialize MooseStack, and configure Boreal preview environments.
2. [Develop with ClickHouse locally](#develop-with-clickhouse-locally) to prepare your local environment, validate data flow, and migrate a dashboard component to ClickHouse.
3. [Going to production](#going-to-production) using the preview environment and reviewed migrations.
</ConditionalContent>

<ConditionalContent whenId="source-database" whenValue="sqlserver">
1. [Project Setup](#project-setup) to initialize MooseStack and configure Boreal preview environments.
2. [Develop with ClickHouse locally](#develop-with-clickhouse-locally) to prepare your local environment, set up Debezium CDC, and migrate a dashboard component to ClickHouse.
3. [Going to production](#going-to-production) using the preview environment and reviewed migrations.
</ConditionalContent>

<Callout type="info" title="AI-assisted Development">
  We recommend using an AI copilot to accelerate the migration to handle complex
  query translations. However, you can complete every step manually if you
  prefer. Any AI-enabled editor (Claude Code, Cursor, Codex, Opencode, GitHub
  Copilot, Windsurf, etc.) will work. Editors that support MCPs can make this
  workflow even faster.
</Callout>

## Project Setup

<ConditionalContent whenId="source-database" whenValue="postgres">
:::include /shared/guides/performant-dashboards/clickpipes.mdx
</ConditionalContent>

### Create and Deploy MooseStack Project
This sets up the foundation for the rest of this guide. You'll initialize a MooseStack project in your monorepo and deploy your new project to [Boreal](https://boreal.cloud) for preview deployments and migration planning.

:::include /shared/guides/performant-dashboards/add-moosestack-and-set-up-boreal.mdx

## Develop with ClickHouse locally

This section covers the local development loop you will use for the rest of the migration: get your environment running, confirm data is flowing, and then migrate one dashboard component at a time. The goal is to keep changes safe and incremental while preserving your existing API contracts.

<ConditionalContent whenId="source-database" whenValue="sqlserver">
For SQL Server migrations, this local loop also includes configuring Debezium CDC so production-source changes continue arriving in ClickHouse during development.
</ConditionalContent>

### Prepare your local development environment

First, get your local services and tooling into a known-good state so migration work is testable from the start.

:::include /shared/guides/performant-dashboards/prepare-your-local-development-environment.mdx

<ConditionalContent whenId="source-database" whenValue="sqlserver">
:::include /shared/guides/performant-dashboards/set-up-change-data-capture-cdc.mdx
</ConditionalContent>

### Migrate a dashboard component to ClickHouse

With your local environment ready, migrate one dashboard backend path from OLTP reads to ClickHouse reads with MooseStack.

You only replace the read layer. Routing, auth, request/response contracts, and frontend behavior stay the same. In your MooseStack project, you will define functions that build and run ClickHouse queries using `OlapTable` objects for type-safe column access, then repoint the existing API handler to call those functions instead of the OLTP query path.

If you set up the optional copilot context workspace in local setup, use it here to organize component-specific files and prompts across all three phases.

Pick a specific dashboard component or report to migrate. You'll work through one component at a time.

<GuideStepper id="performant-dashboards-migration" persist>

    :::include /shared/guides/performant-dashboards/phase-1-translation.mdx

    :::include /shared/guides/performant-dashboards/phase-2-optimization.mdx

    :::include /shared/guides/performant-dashboards/phase-3-query-layer.mdx

</GuideStepper>


## Going to production

In this section, you'll apply your local changes to production. Complete these steps in order:

<Callout type="info" title="Confirm Boreal project access">
  To deploy to production (and to create branch preview environments), you need
  a Boreal project connected to the GitHub repo you’re working in. If you
  haven’t created a project yet, go back to [**Create your Boreal
  project**](#create-and-deploy-moosestack-project) above and
  complete that setup first.
</Callout>

:::include /shared/guides/performant-dashboards/going-to-production.mdx
