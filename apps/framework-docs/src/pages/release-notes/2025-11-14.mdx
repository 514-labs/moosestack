---
title: November 14, 2025
description: Release notes for November 14, 2025
---

import { Callout } from "@/components";

# November 14, 2025

<Callout type="info" title="Highlights">
- **New:** TypeScript MCP template with AI chat integration and data catalog discovery
- **New:** [Enum16 data type](#enum16-data-type-support) for HTTP status codes and extended value ranges
- **New:** [Registry functions](#registry-functions-for-programmatic-resource-access) to inspect and access Moose resources at runtime
</Callout>

## TypeScript MCP template with AI chat integration

New project template for building AI-powered data applications with Model Context Protocol (MCP) server integration. Create projects that include analytical APIs, MCP server tools, and a web interface with AI chat capabilities.

The template includes:
- **AI chat interface** for natural language data exploration
- **Data catalog discovery** tool for automatic schema detection
- **Infrastructure diagnostics** for troubleshooting merge issues and system errors
- **Embedded documentation** resources for AI assistants
- **Monorepo structure** with unified dependency management

```bash filename="Terminal" copy
# Create a new project with the TypeScript MCP template
moose create my-ai-app --template typescript-mcp

cd my-ai-app

# Start the Moose dev server
moose dev

# In a new terminal, start the web app
cd packages/web-app
pnpm install
pnpm dev
```

The MCP server automatically detects database context and provides readonly access to ClickHouse data with query limits up to 1000 rows.

## Enum16 data type support

Support for ClickHouse Enum16 data type with values from -32,768 to 32,767 (compared to Enum8's -128 to 127). Use Enum16 for HTTP status codes, business identifiers, or any enum values exceeding Enum8's range.

```typescript filename="datamodels/ApiRequestLog.ts" copy
  import { Key } from "@514labs/moose-lib";
  
// Define HTTP status codes with Enum16 to support values like 404, 500
  export enum HttpStatusCode {
    "OK" = 200,
    "Created" = 201,
    "BadRequest" = 400,
    "Unauthorized" = 401,
    "NotFound" = 404,
    "InternalServerError" = 500,
    "BadGateway" = 502,
  "ServiceUnavailable" = 503
  }
  
  export interface ApiRequestLog {
    id: Key<string>;
    endpoint: string;
    method: string;
  status_code: HttpStatusCode;  // Uses Enum16
    response_time_ms: number;
    timestamp: Date;
  }
```

## Registry functions for programmatic resource access

New registry functions allow programmatic access to all registered Moose resources at runtime. Build dynamic tools, inspect resources, or generate documentation programmatically.

```typescript filename="scripts/inspect-resources.ts" copy
import { getTables, getApis, getStreams, getWorkflows } from "@514labs/moose-lib";

// Inspect all registered resources in your Moose application
  export function inspectMooseResources() {
    const tables = getTables();
    console.log(`ðŸ“Š Tables (${tables.size}):`);
    for (const [name, table] of tables) {
      console.log(`  - ${name}: ${table.columns.length} columns`);
    }
    
    const apis = getApis();
    console.log(`\nðŸ”Œ APIs (${apis.size}):`);
    for (const [name, api] of apis) {
      const path = api.config.path || `/consumption/${name}`;
      console.log(`  - ${name}: ${path}`);
    }
    
    const streams = getStreams();
    console.log(`\nðŸŒŠ Streams (${streams.size}):`);
    for (const [name, stream] of streams) {
      console.log(`  - ${name}: ${stream.topic}`);
    }
}
```

Available registry functions: `getTables()`, `getTable()`, `getApis()`, `getApi()`, `getStreams()`, `getStream()`, `getWorkflows()`, `getWorkflow()` in both TypeScript and Python.

## Other Features and Improvements
- **Documentation search** â€“ Command palette-style search for guides, API references, and tutorials
- **MCP monorepo structure** â€“ Unified dependency management with `pnpm dev` to start both services
- **Enhanced MCP security** â€“ Readonly mode with ClickHouse built-in protections, query limits up to 1000 rows
- **Automatic database context detection** â€“ MCP server uses ClickHouse's `currentDatabase()` for simpler setup
- **Database-qualified table handling** â€“ Support for database prefixes in SQL queries across TypeScript and Python
- **Better compiler logging** â€“ `[CompilerPlugin]` prefix in dev terminal messages for clearer debugging
- **Deep health monitoring** â€“ Concurrent health checks for Redis, ClickHouse, Redpanda, and Consumption API with `/_moose_internal/health` endpoint

## Bug Fixes
- **list_tables version suffix** â€“ Fixed table names to properly include version identifiers
- **MCP template setup** â€“ Corrected getting started instructions to use `pnpm` and `moose dev`
- **JWT environment variables** â€“ Fixed auth docs to use correct names (`MOOSE_JWT__SECRET`, `MOOSE_JWT__ISSUER`, `MOOSE_JWT__AUDIENCE`)
- **Serverless migrations** â€“ Fixed table reconciliation with remote ClickHouse databases
- **Migration generation** â€“ Fixed `moose generate migration --url` to work with Moose servers
- **Schema compatibility** â€“ Fixed incorrect breaking change detection for JSON, nested structures, and FixedString columns
- **CORS headers** â€“ Added missing distributed tracing headers (`traceparent`, `tracestate`)
