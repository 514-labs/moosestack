language = "typescript" # Must be typescript or python
description = "TypeScript monorepo for exposing ClickHouse analytics to AI apps via MCP."
post_install_print = """
Deploy on Boreal

Boreal is the fastest way to deploy your MooseStack app, built by the MooseStack team.

https://boreal.cloud

---------------------------------------------------------

Run this next:

üìÇ Go to your project directory:
    $ cd {project_dir}

üì¶ Install all dependencies:
    $ pnpm install

üîê Create API authentication tokens:
    $ cp packages/moosestack-service/.env.{example,local}
    $ cp packages/web-app/.env.{example,local}
    $ cd packages/moosestack-service
    $ moose generate hash-token # use the output values below

‚öôÔ∏è Set environment variables:
    1. Set `MCP_API_KEY` in packages/moosestack-service/.env.local to the `ENV API Key` value.
    2. Set `MCP_API_TOKEN` in packages/web-app/.env.local to the `Bearer Token` value.
    3. Set your Anthropic API key in packages/web-app/.env.local.

üöÄ Start both services:
    $ cd ../.. # go back to project root
    $ pnpm dev

Or start each service separately:
    $ pnpm dev:moose    # Start MooseStack service only
    $ pnpm dev:web      # Start web app only
"""
default_sloan_telemetry = "standard"

# Boreal one-click deploy configuration
[boreal]
enabled = true
display_name = "MCP Analytics Starter"
short_description = "Expose ClickHouse analytics to AI apps through an MCP-ready TypeScript service."
featured = true

# Commands Boreal runs during setup, with JSON output parsing
[[boreal.setup_commands]]
command = "moose generate hash-token --json"
outputs = [
  { env_var = "MCP_API_KEY", json_path = "api_key_hash" },
  { env_var = "MCP_API_TOKEN", json_path = "bearer_token" },
]

# Env vars user must provide
[[boreal.env_vars]]
