language = "typescript" # Must be typescript or python
description = "TypeScript monorepo with Express for serving analytical APIs, and a frontend with AI chat and MCP configured"
post_install_print = """
Deploy on Boreal

The easiest way to deploy your MooseStack Applications is to use Boreal
from the creators of MooseStack.

https://boreal.cloud

---------------------------------------------------------

ðŸ“‚ Go to your project directory:
    $ cd {project_dir}

ðŸ“¦ Install all dependencies:
    $ pnpm install

ðŸ“¦ Create API Key authentication tokens
    $ cp packages/moosestack-service/.env.{example,local}
    $ cp packages/web-app/.env.{example,local}
    $ cd packages/moosestack-service
    $ moose generate hash-token # use output for the API Key & Token below

ðŸ“¦ Copy & Set environment variables
    1. Set your API Key in packages/moosestack-service/.env.local to `ENV API Key` generated by moose generate hash-token
    2. Set your API Token in packages/web-app/.env.local to `Bearer Token` generated by moose generate hash-token
    3. Set your Anthropic API key in packages/web-app/.env.local

ðŸš€ Start both services:
    $ cd ../.. # go back to project root
    $ pnpm dev

Or start services individually:
    $ pnpm dev:moose    # Start MooseStack service only
    $ pnpm dev:web      # Start web app only
"""
default_sloan_telemetry = "standard"

# Boreal one-click deploy configuration
[boreal]
enabled = true
display_name = "Chat with your App"
short_description = "Deploy an AI chat app that can query your data"

# Commands Boreal runs during setup, with JSON output parsing
[[boreal.setup_commands]]
command = "moose generate hash-token --json"
outputs = [
  { env_var = "MOOSE_AUTHENTICATION__ADMIN_API_KEY", json_path = "api_key_hash" },
  { env_var = "MOOSE_ADMIN_TOKEN", json_path = "bearer_token" }
]

# Env vars user must provide
[[boreal.env_vars]]
name = "ANTHROPIC_API_KEY"
label = "Anthropic API Key"
secret = true
required = true
